package de.dhbwka.java.exercise.test;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public class RedditDots {

    static String binary = "";
    static BufferedImage image;
    static String RedditBinary = "101010111111100101101101000110110111011101100011110100101110000001101101011011111111011111110011001101111100011101111111010011101011000111100111100011110110111110111101101101101111011110111011101111011010100100100110101001010010011001010101100001010001000100111000010001001110100111100101010111000111010100000111010011000010001110000001011101101011010101001001100011110111101100111100100010010111110101110010101110000110100101000010010010001100110001001001100000110100001100100111001000001010001111110000110010110110001100010011001100000011010100000011000001101101100010111000010100111010011101110010011000110110111110011011000101110110011011010001011101100001100011011110011110000011101000001010100101010010111001011001010100001101000101101110111011001000111110101001011000010101100011110010100010010110000100100000000000101010100000101101000110000011101100001100110001011100110010000101110001101111001010100111011010110000001111101100100100010110100101110001000110101110110101110000110100010100101110100001101110110101100101111011110110100001101111111101111110000110011111110000101111010111101001011001111010111101111101011010111111101110111001111001101111001111101110111011001011111111111111110100001100111110110111101011011000100100000001000000100000011110010011101110010110011010110101000111001110011001111111001001010100101111100010001000000000101001010001110100100110001100101100100010000110111101010001000100001101101110010010101011011010010010011000001001100010010100110011110110010000001000011010101001111110000101011011001111110111000001010100000100110010111101001000011011001010010000000011000001011000101110001000011101000111110001011010110010111101110100111011010011100010110010101010111100110111010111000101111101110101010101001001001011011010101010010001111000010000110101101100011000111110101010001001011011010001011110011110101111010100101001100111001111100000001100111100100111011100000001011001100101011001000001101001000010010110011000100101100111111110001000111100010001111111001000110110110010111001100011110011111000010010010001111000000111011011000111101000001001010000110101100010001110100001100001111000111011100110011000101111111001110010100101100111111010010111011101100111111111111010101111111011110011111101111111101011111100001011110111101110101101011111011110111111111011011011110110101111100110001011101011011110101101101110111111010111110111110111110111101111111011011101111111111111010011101111100101011110101101011111111111011111101100111001011111111101001111111011011011011110011111011111111111010011111011101011110111011111010111111100111100110011011110110111111001101111111111101111101111110110110011110011011111111010101101101010011011111011110111111111010111001011101111011011111100111111111110111111110001111010111011111100011110100111111111011101111111100001011110101011110011101111111101101000111101010110110111011111110001111101010111011010001111011011001111011111111001111011110100111111111011011111010101110001111001101101111010111111100101110100111010";

    public static void main(String[] args) throws IOException {
        readImageBinary();
        prettyPrintBinary();
        evalStrings();
        getMax();
    }

    private static void getMax() {
        int max = 0;
        for (int i = 0; i < binary.length(); i++) {
            if (i % 2 == 0) {
                char c = binary.charAt(i);
                int cVal = Character.getNumericValue(c);
                if (max < cVal) {
                    max = cVal;
                }
            }
        }
        System.out.println("max: " + max);
    }

    private static void evalStrings() {
        System.out.println();
        System.out.println();
        System.out.println(binary.matches(RedditBinary));
    }

    private static void prettyPrintBinary() {
        for (int i = 0; i < binary.length(); i++) {
            System.out.print(binary.charAt(i));
            if (i % image.getWidth() == 0 && i != 0) {
                //      System.out.println();
            }
        }
    }

    private static void readImageBinary() throws IOException {
        File file = new File("src/test.png");
        image = ImageIO.read(file);
        StringBuilder sb = new StringBuilder();
        int counterWhite = 0;
        for (int i = 0; i < image.getHeight(); i++) {
            for (int j = 0; j < image.getWidth(); j++) {
                if (i % 2 == 0) {
                    int clr = image.getRGB(j, i);
                    if (clr == -1) {
                        counterWhite++;
                    } else {
                        if (counterWhite != 0) {
                            sb.append(counterWhite).append(":");
                        }
                        counterWhite = 0;
                    }
                }
            }
        }
        binary = sb.toString();
    }

}
